(this.webpackJsonppart2=this.webpackJsonppart2||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var o=t(1),r=t(14),c=t.n(r),a=t(3),u=t(0),i=function(e){var n=e.person,t=e.deletePerson;return Object(u.jsxs)("li",{className:"person",children:[n.name," - ",n.number," ",Object(u.jsx)("button",{name:n.name,value:n.id,onClick:t,children:"Delete"})]})},s=function(e){var n=e.persons,t=e.showAll,o=e.deletePerson,r=t?n.filter((function(e){return-1!==e.name.toLowerCase().indexOf(t.toLowerCase())})):n;return Object(u.jsx)("div",{children:r.map((function(e){return Object(u.jsx)(i,{person:e,deletePerson:o},e.name)}))})},l=function(e){var n=e.newName,t=e.newNumber,o=e.handleNameChange,r=e.handleNumberChange,c=e.addPerson;return Object(u.jsxs)("form",{onSubmit:c,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:n,onChange:o})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:t,onChange:r})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var n=e.showAll,t=e.handleShowChange;return Object(u.jsxs)("div",{children:["filter shown with ",Object(u.jsx)("input",{value:n,onChange:t})]})},j=t(4),h=t.n(j),f="https://serene-bastion-38521.herokuapp.com/api/persons",b=function(){return h.a.get(f).then((function(e){return e.data}))},m=function(e){return h.a.post(f,e).then((function(e){return e.data}))},O=function(e,n){return h.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},v=function(e){return h.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))},p=function(e){var n=e.message;return n?Object(u.jsx)("div",{className:"error",children:n}):null},g=function(){return Object(u.jsxs)("div",{style:{color:"green",fontStyle:"italic",fontSize:16},children:[Object(u.jsx)("br",{}),Object(u.jsx)("em",{children:"Note app, Department of Computer Science, University of Helsinki 2021"})]})},x=function(){var e=Object(o.useState)([]),n=Object(a.a)(e,2),t=n[0],r=n[1],c=Object(o.useState)(""),i=Object(a.a)(c,2),j=i[0],h=i[1],f=Object(o.useState)(""),x=Object(a.a)(f,2),w=x[0],C=x[1],N=Object(o.useState)(""),S=Object(a.a)(N,2),y=S[0],P=S[1],k=Object(o.useState)(),A=Object(a.a)(k,2),D=A[0],E=A[1];Object(o.useEffect)((function(){b().then((function(e){r(e)}))}),[]);return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Phonebook"}),Object(u.jsx)(p,{message:D}),Object(u.jsx)(d,{showAll:y,handleShowChange:function(e){console.log(e.target.value),P(e.target.value)}}),Object(u.jsx)(l,{newName:j,newNumber:w,handleNameChange:function(e){console.log(e.target.value),h(e.target.value)},handleNumberChange:function(e){console.log(e.target.value),C(e.target.value)},addPerson:function(e){e.preventDefault(),console.log("person added",e.target);var n={name:j,number:w};if(t.find((function(e){return e.name===j})))if(window.confirm("".concat(j," is already added to Phonebook, do you want to update the existing contact?"))){var o=t.find((function(e){return e.name===j}));console.log(o),O(o.id,n).then((function(e){r(t.map((function(n){return n.id!==o?n:e}))),h(""),C("")}))}else h(""),C("");else m(n).then((function(e){r(t.concat(e)),h(""),C(""),E("Added '".concat(j,"' to the list")),setTimeout((function(){E(null)}),4e3)}));b().then((function(e){r(e)}))}}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)("ul",{children:Object(u.jsx)(s,{persons:t,showAll:y,deletePerson:function(e){var n=t.find((function(n){return n.id===e.target.value}));window.confirm("Do you want to delete ".concat(e.target.name," ?"))&&v(e.target.value).then((function(t){r(t.filter((function(n){return n.id!==e.target.value}))),console.log(n)})).catch((function(e){e.response&&(E("Person '".concat(t.name,"' was already removed from server")),setTimeout((function(){E(null)}),5e3)),b().then((function(e){r(e)}))}))}})}),Object(u.jsx)(g,{})]})};t(38);c.a.render(Object(u.jsx)(x,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.3e415eaf.chunk.js.map